<UserControl x:Class="SinTachiePlugin.Parts.PartBlockUI"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:SinTachiePlugin.Parts"
             xmlns:c="clr-namespace:YukkuriMovieMaker.Controls;assembly=YukkuriMovieMaker.Controls"
             xmlns:properties="clr-namespace:SinTachiePlugin.Parts.Controller"
             d:DataContext="{d:DesignInstance Type=local:PartBlock}"
             mc:Ignorable="d">
    <Grid Background="#0000" ToolTip="{x:Static properties:Resources.PartBlockToolTip}">
        <Grid.Style>
            <Style TargetType="Grid">
                <Setter Property="Margin" Value="6,0,0,0" />
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Selected}" Value="True">
                        <Setter Property="Margin" Value="0,0,0,0" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Grid.Style>
        <Border BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" BorderThickness="1">
            <StackPanel Margin="4,4,4,4" Orientation="Vertical">
                <WrapPanel>
                    <Border BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" BorderThickness="2" VerticalAlignment="Center">
                        <StackPanel Margin="0,0,0,0" Orientation="Horizontal">
                            <CheckBox Margin="2,3,5,0" VerticalAlignment="Top" Width="15" Height="15" HorizontalAlignment="Left"
                                      IsChecked="{Binding Appear, Mode=OneWay}" Unchecked="Update_CheckBox" Checked="Update_CheckBox"
                                      ToolTip="{x:Static properties:Resources.PartBlockToolTip}">

                                <CheckBox.Style>
                                    <Style TargetType="CheckBox">
                                        <Setter Property="Background" Value="#0000"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Selected}" Value="True">
                                                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </CheckBox.Style>
                            </CheckBox>
                            <StackPanel Orientation="Horizontal">
                                <StackPanel.Style>
                                    <Style TargetType="StackPanel">
                                        <!-- デフォルトで表示 -->
                                        <Setter Property="Visibility" Value="Visible" />
                                        <!-- str が空文字列または null の場合、非表示 -->
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding TagName}" Value="">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding TagName}" Value="{x:Null}">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </StackPanel.Style>
                                <StackPanel Orientation="Horizontal" ToolTip="{x:Static properties:Resources.TagPanelToolTip}">
                                    <TextBlock Text="{x:Static properties:Resources.TagPanelText}" Margin="5,0,3,0" VerticalAlignment="Top" FontSize="15"/>
                                    <Border  Margin="3,0,10,0" BorderThickness="2" Height="20"
                                             VerticalAlignment="Top">
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Setter Property="BorderBrush" Value="#0000"/>
                                                <Setter Property="Background" Value="#60808080"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Selected}" Value="True">
                                                        <Setter Property="BorderBrush" Value="#60808080"/>
                                                        <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>
                                        <TextBlock Text="{Binding TagName}" Margin="4,0,4,0" VerticalAlignment="Center"
                                                FontSize="16"/>
                                    </Border>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                    <StackPanel Margin="10,0,0,0" VerticalAlignment="Center" Orientation="Horizontal"
                                ToolTip="{x:Static properties:Resources.BusPanelToolTip}">
                        <TextBlock Text="{x:Static properties:Resources.BusPanelText}" Margin="0,0,0,0" VerticalAlignment="Top"/>
                        <Border Margin="5,0,0,0" BorderThickness="2" Height="16"
                                VerticalAlignment="Top">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="BorderBrush" Value="#0000"/>
                                    <Setter Property="Background" Value="#60808080"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Selected}" Value="True">
                                            <Setter Property="BorderBrush" Value="#60808080"/>
                                            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <TextBlock Text="{Binding BusNum.Values[0].Value,StringFormat={}{0:F0}}"
                                       Margin="4,0,4,0" VerticalAlignment="Center"/>
                        </Border>
                    </StackPanel>
                    <StackPanel Margin="10,0,0,0" VerticalAlignment="Center" Orientation="Horizontal"
                                ToolTip="{x:Static properties:Resources.ParentPanelToolTip}">
                        <StackPanel.Style>
                            <Style TargetType="StackPanel">
                                <!-- デフォルトで表示 -->
                                <Setter Property="Visibility" Value="Visible" />
                                <!-- str が空文字列または null の場合、非表示 -->
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Parent}" Value="">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Parent}" Value="{x:Null}">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StackPanel.Style>
                        <TextBlock Text="{x:Static properties:Resources.ParentPanelText}" VerticalAlignment="Top"/>
                        <Border Margin="5,0,0,0" BorderThickness="2" Height="16"
                                VerticalAlignment="Top">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="BorderBrush" Value="#0000"/>
                                    <Setter Property="Background" Value="#60808080"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Selected}" Value="True">
                                            <Setter Property="BorderBrush" Value="#60808080"/>
                                            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <TextBlock Text="{Binding Parent}" Margin="4,0,4,0" VerticalAlignment="Center"/>
                        </Border>
                    </StackPanel>
                    <StackPanel Margin="10,0,0,0" VerticalAlignment="Center" Orientation="Horizontal">
                        <StackPanel.Style>
                            <Style TargetType="StackPanel">
                                <!-- デフォルトで表示 -->
                                <Setter Property="Visibility" Value="Visible" />
                                <!-- str が空文字列または null の場合、非表示 -->
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Comment}" Value="">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Comment}" Value="{x:Null}">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StackPanel.Style>
                        <TextBlock Text="{x:Static properties:Resources.CommentPanelText}" VerticalAlignment="Top"/>
                        <Border Margin="5,0,0,0" BorderThickness="2" Height="16"
                                VerticalAlignment="Top">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="BorderBrush" Value="#0000"/>
                                    <Setter Property="Background" Value="#60808080"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Selected}" Value="True">
                                            <Setter Property="BorderBrush" Value="#60808080"/>
                                            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <TextBlock Text="{Binding Comment}" Margin="4,0,4,0" VerticalAlignment="Center"
                                       ToolTip="{x:Static properties:Resources.CommentPanelToolTip}"/>
                        </Border>
                    </StackPanel>
                </WrapPanel>
                <c:FileSelector x:Name="selector" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,4,0,0"
                                Value="{Binding ImagePath}" ShowThumbnail="True" FileType="画像" FileGroup="TachieParts"
                                BeginEdit="PropertiesEditor_BeginEdit" EndEdit="PropertiesEditor_EndEdit"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
